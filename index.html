<!DOCTYPE html>
<html>

<head>
	<title></title>
	<style>
		@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap');

		* {
			box-sizing: border-box;
		}

		html,
		body {
			padding: 0;
			margin: 0;
		}

		#bar ul {
			padding-left: 0px;
		}

		#bar ul li {
			list-style-type: none;
		}

		#bar ul li a {
			display: block;
			width: 20px;
			height: 20px;
			border-radius: 50%;
			background-color: white;
			margin: 5px;
			opacity: 0.8;
		}

		#content {
			scroll-behavior: smooth;
			position: fixed;
			height: 100vh;
			overflow-x: hidden;
			overflow-y: auto;
			top: 0;
			width: 100%;
			scroll-snap-type: mandatory;
			scroll-snap-points-y: repeat(100vh);
			scroll-snap-type: y mandatory;
		}

		#content section {
			padding: 1rem;
			height: 100vh;
			scroll-snap-align: start;
			text-align: center;
			position: relative;
			display: flex;
			flex-direction: column;
			align-items: center;
			/*e tu ci credi che abbiano aggiornato?*/
			/*ah, lo hanno aggiornato? incredibile ahah*/
			/*ticket cosa?*/
		}

		#content section .title {
			z-index: 3;
			color: white;
			font-size: 5vw;
			font-family: 'Montserrat', sans-serif;
			padding-top: 25vh;
		}

		#content section .btn {
			z-index: 3;
			color: white;
			font-size: large;
			padding: 20px;
			background-color: #FF6600;
			margin-top: 50px;
		}

		#content section .overlay {
			left: 0;
			top: 0;
			height: 100vh;
			width: 100vw;
			position: absolute;
			padding: 0%;
			margin: 0;
			z-index: 2;
			background-color: black;
			opacity: 0.5;
		}

		#bar {
			position: fixed;
			right: 0;
			top: 0;
			padding-right: 20px;
			height: 100vh;
			display: flex;
			align-items: center;
			flex-direction: row;
			justify-content: right;
		}

		.backgroundImage {
			background-origin: padding-box;
			background-position: center;
			background-repeat: no-repeat;
			background-size: cover;
			background-color: black;
		}

		.bullet {
			background-color: white;
		}

		.bullet.animActive {
			background-color: red !important;
		}

		@media only screen and (max-width: 800px) {
			#content section .title {
				font-size: 7vw;
			}
		}

		.anim {
			opacity: 0;
		}

		@keyframes anim1 {
			from {
				transform: translateY(-100px);
				opacity: 0;
			}

			to {
				transform: translateY(0);
				opacity: 1;
			}
		}

		@keyframes bullet1 {
			from {
				transform: scale(1);
			}

			to {
				transform: scale(1.5);
			}
		}
	</style>
</head>

<body>
	<div id="content">
		<a name="homepage"></a>
		<section class="backgroundImage animTrigger" style="background-image: url(assets/img/home1.jpeg)" data-animId="slide1">
			<div class="overlay">1</div>
			<div class="anim title" data-animTarget="slide1" data-animDelay="0.5s">SVOLTASTUDENTI</div>
			<div class="anim btn" data-animTarget="slide1" data-animDelay="1s">Iscriviti</div>
		</section>
		<a name="b"></a>
		<section class="backgroundImage animTrigger" style="background-image: url(assets/img/home1.jpeg)" data-animId="slide2">
			<div class="overlay">2</div>
			<div class="anim title" data-animTarget="slide2" data-animDelay="0.5s">SVOLTASTUDENTI</div>
			<div class="anim btn" data-animTarget="slide2" data-animDelay="1s">Iscriviti</div>
		</section>
		<a name="c"></a>
		<section class="backgroundImage animTrigger" style="background-image: url(assets/img/home1.jpeg)" data-animId="slide3">
			<div class="overlay">3</div>
			<div class="anim title" data-animTarget="slide3" data-animDelay="0.5s">SVOLTASTUDENTI</div>
			<div class="anim btn" data-animTarget="slide3" data-animDelay="1s">Iscriviti</div>
		</section>
		<a name="d"></a>
		<section class="backgroundImage animTrigger" style="background-image: url(assets/img/home1.jpeg)" data-animId="slide4">
			<div class="overlay">4</div>
			<div class="anim title" data-animTarget="slide4" data-animDelay="0.5s">SVOLTASTUDENTI</div>
			<div class="anim btn" data-animTarget="slide4" data-animDelay="1s">Iscriviti</div>
		</section>
		<a name="e"></a>
		<section class="backgroundImage animTrigger" style="background-image: url(assets/img/home1.jpeg)" data-animId="slide5">
			<div class="overlay">5</div>
			<div class="anim title" data-animTarget="slide5" data-animDelay="0.5s">SVOLTASTUDENTI</div>
			<div class="anim btn" data-animTarget="slide5" data-animDelay="1s">Iscriviti</div>
		</section>
		<a name="f"></a>
		<section class="backgroundImage animTrigger" style="background-image: url(assets/img/home1.jpeg)" data-animId="slide6">
			<div class="overlay"></div>
			<div class="anim title" data-animTarget="slide6" data-animDelay="0.5s">SVOLTASTUDENTI</div>
			<div class="anim btn" data-animTarget="slide6" data-animDelay="1s">Iscriviti</div>
		</section>
	</div>
	<div id="bar">
		<ul>
			<li>
				<a href="#homepage" class="bullet" data-animTarget="slide1"></a>
			</li>
			<li>
				<a href="#b" class="bullet" data-animTarget="slide2"></a>
			</li>
			<li>
				<a href="#c" class="bullet" data-animTarget="slide3"></a>
			</li>
			<li>
				<a href="#d" class="bullet" data-animTarget="slide4"></a>
			</li>
			<li>
				<a href="#e" class="bullet" data-animTarget="slide5"></a>
			</li>
			<li>
				<a href="#f" class="bullet" data-animTarget="slide6"></a>
			</li>
		</ul>
	</div>

	<script>
		// const images = document.querySelectorAll('.anim');

		// observer = new IntersectionObserver((entries) => {
		// 	entries.forEach(entry => {
		// 		if (entry.intersectionRatio > 0) {
		// 			entry.target.style.animation = `anim1 2s ${entry.target.dataset.delay} forwards ease-out`;
		// 		} else {
		// 			entry.target.style.animation = 'none';
		// 		}
		// 	})
		// })

		// images.forEach(image => {
		// 	observer.observe(image)
		// })


		let options = {
			root: null,
			rootMargin: "0px",
			threshold: (_ => {
				let toReturn = [];
				let numSteps = 100;

				for (let i=1.0; i<=numSteps; i++) {
					toReturn.push(i/numSteps);
				}

				toReturn.push(0);
				return toReturn;
			})()
		};

		observer = new IntersectionObserver(entries => {
			entries.forEach(entry => {
				if (entry.target.dataset.animid){
					let targets = document.querySelectorAll(`*[data-animtarget="${entry.target.dataset.animid}"]`);
					targets.forEach(item => {
						if (entry.intersectionRatio > 0.1) {
							item.classList.add('animActive');
						}
						else if (entry.intersectionRatio < 0.9) {
							item.classList.remove('animActive');
						}
					})
					
				}
			});
		},  options);

		document.querySelectorAll('.animTrigger').forEach(item => {
			// console.log(item);
			observer.observe(item);
		})
	</script>
</body>

</html>