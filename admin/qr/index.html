<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<style>
		#placeholder, #overlay {
			position: absolute;
			top: 100px;
			left: 100px;
		}
	</style>
	<title></title>
	<script type="text/javascript" src="./js/qrcode.js"></script>
	<script>
		var overlay = '<?xml version="1.0" encoding="utf-8"?>	<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"		 viewBox="0 0 566.93 566.93" style="enable-background:new 0 0 566.93 566.93;" xml:space="preserve">	<style type="text/css">		.st0{fill:#FFFFFF;}		.st1{fill:#FF3366;}	</style><g id="qr"><!-- REPLACE HERE --></g>	<g id="Livello_1">		<polygon class="st0" points="371.57,214.94 371.57,195.36 351.99,195.36 351.99,175.78 332.41,175.78 312.83,175.78 293.25,175.78 			273.68,175.78 254.1,175.78 234.52,175.78 214.94,175.78 214.94,195.36 195.36,195.36 195.36,214.94 175.78,214.94 175.78,234.52 			175.78,254.1 175.78,273.68 175.78,293.25 175.78,312.83 175.78,332.41 175.78,351.99 195.36,351.99 195.36,371.57 214.94,371.57 			214.94,391.15 234.52,391.15 254.1,391.15 273.68,391.15 293.25,391.15 312.83,391.15 332.41,391.15 351.99,391.15 351.99,371.57 			371.57,371.57 371.57,351.99 391.15,351.99 391.15,332.41 391.15,312.83 391.15,293.25 391.15,273.68 391.15,254.1 391.15,234.52 			391.15,214.94 	"/>		<rect x="0" class="st0" width="156.39" height="156.39"/>		<path d="M131.62,19.55c-3.43-5.93-8.39-10.89-14.32-14.32C111.55,1.9,104.87,0,97.75,0H39.1c-7.12,0-13.8,1.9-19.55,5.23			C13.61,8.66,8.67,13.62,5.23,19.55C1.91,25.3,0,31.98,0,39.1v58.65c0,7.12,1.9,13.8,5.23,19.55c3.43,5.94,8.38,10.89,14.32,14.32			c5.75,3.33,12.42,5.23,19.55,5.23h97.75V39.1C136.85,31.98,134.94,25.3,131.62,19.55z M117.3,117.3H39.1			c-10.79,0-19.55-8.75-19.55-19.55V39.1c0-10.8,8.75-19.55,19.55-19.55h58.65c10.8,0,19.55,8.75,19.55,19.55V117.3z"/>		<path d="M97.75,58.14v39.61h-39.1c-10.79,0-19.55-8.76-19.55-19.55V58.65c0-10.79,8.76-19.55,19.55-19.55H78.2			C88.83,39.1,97.48,47.58,97.75,58.14z"/>					<rect x="410.54" y="0" transform="matrix(-1.836970e-16 1 -1 -1.836970e-16 566.9291 -410.535)" class="st0" width="156.39" height="156.39"/>		<path d="M547.38,131.62c5.93-3.43,10.89-8.39,14.32-14.32c3.33-5.75,5.23-12.43,5.23-19.55V39.1c0-7.12-1.9-13.8-5.23-19.55			c-3.43-5.94-8.39-10.89-14.32-14.32C541.63,1.9,534.95,0,527.83,0h-58.65c-7.12,0-13.8,1.9-19.55,5.23			c-5.94,3.43-10.89,8.38-14.32,14.32c-3.33,5.75-5.23,12.42-5.23,19.55v97.75h97.74C534.95,136.85,541.63,134.94,547.38,131.62z			 M449.63,117.3V39.1c0-10.79,8.75-19.55,19.55-19.55h58.65c10.8,0,19.55,8.75,19.55,19.55v58.65c0,10.8-8.75,19.55-19.55,19.55			H449.63z"/>		<path d="M508.79,97.74h-39.61v-39.1c0-10.79,8.76-19.55,19.55-19.55h19.55c10.79,0,19.55,8.76,19.55,19.55V78.2			C527.83,88.83,519.35,97.48,508.79,97.74z"/>					<rect x="0" y="410.54" transform="matrix(6.123234e-17 -1 1 6.123234e-17 -410.5332 566.931)" class="st0" width="156.39" height="156.39"/>		<path d="M19.55,435.31c-5.93,3.43-10.89,8.39-14.32,14.32C1.91,455.38,0,462.06,0,469.18v58.65c0,7.12,1.9,13.8,5.23,19.55			c3.43,5.94,8.39,10.89,14.32,14.32c5.75,3.33,12.43,5.23,19.55,5.23h58.65c7.12,0,13.8-1.9,19.55-5.23			c5.94-3.43,10.89-8.38,14.32-14.32c3.33-5.75,5.23-12.42,5.23-19.55v-97.75H39.1C31.98,430.08,25.3,431.99,19.55,435.31z			 M117.3,449.63v78.2c0,10.79-8.75,19.55-19.55,19.55H39.1c-10.8,0-19.55-8.75-19.55-19.55v-58.65c0-10.8,8.75-19.55,19.55-19.55			H117.3z"/>		<path d="M58.14,469.18h39.61v39.1c0,10.79-8.76,19.55-19.55,19.55H58.65c-10.79,0-19.55-8.76-19.55-19.55v-19.55			C39.1,478.1,47.59,469.45,58.14,469.18z"/>		<g>			<path d="M260.75,362.5c-4.07-6.78-7.1-15.71-8.16-20c-1.78-7.07-2.99-10.86-2.95-21.47c0.01-9.39,0.91-18.33,7.04-30.37				c4.73-9.29,13.77-20.96,13.77-20.96l-26.68-16.05c0,0-5.31-2.39-5.21-6.27c0.07-3.18,8.76-5.93,8.76-5.93l90.86-36.59				c0,0,0.82-0.43,2.05-0.93c-16-11.45-35.59-18.21-56.77-18.21c-53.97,0-97.72,43.75-97.72,97.72c0,50.42,38.2,91.92,87.23,97.15				C267.75,373.19,262.51,365.42,260.75,362.5z"/>			<path d="M351.06,212.91c-0.03,0.11-0.06,0.2-0.06,0.2l-22.77,96.5c0,0-2.61,10.71-5.64,10.98c-4.12,0.36-7.53-4.57-7.53-4.57				l-19.44-25.29c0,0-4.97,5.82-8.64,11.3c-3.65,5.53-5.73,11.86-5.56,19.61c0.18,7.74,3.51,17.39,7.68,25.38				c5.56,10.64,13.83,20.86,21.82,30.21c40.6-11.87,70.26-49.35,70.26-93.78C381.18,255.71,369.61,230.69,351.06,212.91z"/>		</g>	</g>	</svg>	';
	</script>
	<script>
		const typeNumber = 3;
		const errorCorrectionLevel = 'H';
	</script>
	<script>
		function rebuild(){
			let qr = qrcode(typeNumber, errorCorrectionLevel);
			var data = document.getElementById('text').value;
			if (data.length > 35)
				return null;

			try {
				qr.addData(data);
				qr.make();
				document.getElementById('placeholder').innerHTML = qr.createSvgTag(19.55, 0);
				var result = overlay.replace('<!-- REPLACE HERE -->', document.querySelector('#placeholder > svg').innerHTML);
				return result;
			}
			catch (e){
				return null;
			}
		}

		function draw(){
			let data = rebuild();

			if (data){
				document.querySelector('#placeholder > svg').innerHTML = data;
			}
			else {
				document.querySelector('#placeholder > svg').innerHTML = "";
			}
		}

	</script>
	<script>
		function downloadSvg(){
			let data = rebuild();
			if (data){
				download(`${prompt("FileName")}.svg`, data);
				draw();
			}
			else {
				alert('Invalid Data!');
			}
		}

		function download(filename, text) {
			var element = document.createElement('a');
			element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
			element.setAttribute('download', filename);

			element.style.display = 'none';
			document.body.appendChild(element);

			element.click();

			document.body.removeChild(element);
		}
	</script>
</head>
<body>
	<input type="text" onkeyup="draw()" id="text" maxlength="35">
	<a href="javascript:downloadSvg()" id="placeholder"></a>
</body>
</html>